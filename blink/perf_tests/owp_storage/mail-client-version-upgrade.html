<!doctype html>
<title>Mail Client Version Upgrade</title>
<script src="../resources/runner.js"></script>
<script src="resources/shared.js"></script>
<script src="resources/mail-client-config.js"></script>
<script src="resources/mail-client-write-setup.js"></script>
<script>
  deleteThenOpen(databaseName, populateFakeMailClientDatabase, () => {
    var test = {
      description: 'Benchmark for database version upgrade by adding/removing indexes and object stores.',
      unit: 'ms',
      iterationCount: 20,
      tracingCategories: 'IndexedDB',
      traceEventsToMeasure: ['Transaction::lifetime', 'IDBObjectStore::createIndexRequestSetup', 'IDBObjectStore::deleteIndex', 'IDBObjectStore::index'],
      path: "resources/mail-client-version-upgrade-runner.html"
    }
    PerfTestRunner.measurePageLoadTimeAfterDoneMessage(test);
  });
</script>